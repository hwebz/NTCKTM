function fitBounds(strictBounds, map) {
    if (strictBounds.contains(map.getCenter())) {
        return;
    }
    var c = map.getCenter(),
        x = c.lng(),
        y = c.lat(),
        maxX = strictBounds.getNorthEast().lng(),
        minY = strictBounds.getNorthEast().lat(),

        minX = strictBounds.getSouthWest().lng(),
        maxY = strictBounds.getSouthWest().lat();

    //if (x < minX) x = minX;
    //if (x > maxX) x = maxX;
    if (y < minY) y = minY;
    if (y > maxY) y = maxY;

    map.setCenter(new google.maps.LatLng(y, x));
}

function initializeGoogleMapStyles() {
    var mapProp = {
        center: new google.maps.LatLng(23.2901481, 14.0983226),
        zoom: 3,
        minZoom: 2,
        scrollwheel: false,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("googleMap"), mapProp);
    if (map != null) {
        var styles = [
            {
                "featureType": "administrative",
                "elementType": "all",
                "stylers": [
                    {
                        "color": "#140505"
                    },
                    {
                        "visibility": "simplified"
                    }
                ]
            },
            {
                "featureType": "administrative",
                "elementType": "geometry",
                "stylers": [
                    {
                        "visibility": "off"
                    }
                ]
            },
            {
                "featureType": "administrative",
                "elementType": "labels",
                "stylers": [
                    {
                        "visibility": "simplified"
                    },
                    {
                        "color": "#e8e8e8"
                    }
                ]
            },
            {
                "featureType": "administrative",
                "elementType": "labels.text.fill",
                "stylers": [
                    {
                        "color": "#747474"
                    }
                ]
            },
            {
                "featureType": "landscape",
                "elementType": "all",
                "stylers": [
                    {
                        "color": "#dfdfdf"
                    },
                    {
                        "visibility": "on"
                    }
                ]
            },
            {
                "featureType": "landscape",
                "elementType": "labels",
                "stylers": [
                    {
                        "visibility": "on"
                    }
                ]
            },
            {
                "featureType": "poi",
                "elementType": "all",
                "stylers": [
                    {
                        "visibility": "off"
                    }
                ]
            },
            {
                "featureType": "road",
                "elementType": "all",
                "stylers": [
                    {
                        "saturation": -100
                    },
                    {
                        "lightness": 45
                    },
                    {
                        "visibility": "on"
                    }
                ]
            },
            {
                "featureType": "road.highway",
                "elementType": "all",
                "stylers": [
                    {
                        "visibility": "simplified"
                    }
                ]
            },
            {
                "featureType": "road.arterial",
                "elementType": "labels.icon",
                "stylers": [
                    {
                        "visibility": "off"
                    }
                ]
            },
            {
                "featureType": "transit",
                "elementType": "all",
                "stylers": [
                    {
                        "visibility": "off"
                    }
                ]
            },
            {
                "featureType": "water",
                "elementType": "all",
                "stylers": [
                    {
                        "color": "#ededed"
                    },
                    {
                        "visibility": "on"
                    }
                ]
            }
        ];
        map.setOptions({ styles: styles });
        // Limit the zoom level
        google.maps.event.addListener(map, 'zoom_changed', function () {
            if (map.getZoom() < mapProp.minZoom) map.setZoom(mapProp.minZoom);
        });
        
        google.maps.event.addListener(map, 'bounds_changed', function () {
            var zoomLevel = map.zoom;
            //var c = map.getCenter(),
            //x = c.lng(),
            //y = c.lat();
            //console.clear();
            //console.log(map.getBounds().getNorthEast().lat());
            //console.info("zoom: " + map.zoom);
            //console.info("x: " + x + ";y: " + y);
            
            switch (zoomLevel) {
                case 2:
                    var strictBounds10 = new google.maps.LatLngBounds(
                        new google.maps.LatLng(37, -180),
                        new google.maps.LatLng(-37, 180)
                    );
                    fitBounds(strictBounds10, map);
                    break;
                case 3:
                    var strictBounds3 = new google.maps.LatLngBounds(
                        new google.maps.LatLng(73, -180),
                        new google.maps.LatLng(-73, 180)
                    );
                    fitBounds(strictBounds3, map);
                    break;
                case 4:
                    var strictBounds4 = new google.maps.LatLngBounds(
                        new google.maps.LatLng(80, -180),
                        new google.maps.LatLng(-80, 180)
                    );
                    fitBounds(strictBounds4, map);
                    break;
                case 5:
                    var strictBounds5 = new google.maps.LatLngBounds(
                        new google.maps.LatLng(83, -180),
                        new google.maps.LatLng(-83, 180)
                    );
                    fitBounds(strictBounds5, map);
                    break;
                case 6:
                case 7:
                    var strictBounds6 = new google.maps.LatLngBounds(
                        new google.maps.LatLng(84, -180),
                        new google.maps.LatLng(-84, 180)
                    );
                    fitBounds(strictBounds6, map);
                    break;
                case 8:
                case 9:
                    var strictBounds8 = new google.maps.LatLngBounds(
                        new google.maps.LatLng(84.8, -180),
                        new google.maps.LatLng(-84.8, 180)
                    );
                    fitBounds(strictBounds8, map);
                    break;
                default:
                    var strictBounds = new google.maps.LatLngBounds(
                        new google.maps.LatLng(85, -180),
                        new google.maps.LatLng(-85, 180)
                    );
                    fitBounds(strictBounds, map);
            }
        });
    }
    return map;
}

google.maps.event.addDomListener(window, 'load', initializeGoogleMapStyles);